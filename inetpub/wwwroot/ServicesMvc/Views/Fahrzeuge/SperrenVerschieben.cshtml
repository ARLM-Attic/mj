@using CkgDomainLogic.Fahrzeuge.ViewModels
@model FahrzeugSperrenVerschiebenViewModel

<h3 class="page-title" id="headerTitle">@Localize.Fahrzeuge_SperrenVerschieben<small></small></h3>

<div id="divFzgSperrenVerschiebenFilter" class="form-horizontal label-width-150">
    @Html.FormRadioButtonListFor(m => m.FahrzeugSelektor.Auswahl, Model.FahrzeugSelektor.AuswahlOptionen.ToSelectList())

    @Html.FormCheckBoxFor(m => m.FahrzeugSelektor.NurMitBemerkung, labelHidden: true)
</div>

<div id="divFzgSperrenVerschiebenGrid">
    @Html.Partial("SperrenVerschieben/Grid", Model)
</div>

<script type="text/javascript">

    var ladeHinweis = '@Localize.LoadingData';

    function FormPreparePrivate() {
        GridAllColumnFilterApplyToGrid("GridFzgSperrenVerschieben");

        $('#divFzgSperrenVerschiebenFilter').on('change', ':radio', function (e) {
            FilterFzgSperrenVerschiebenData();
        });
        $('#divFzgSperrenVerschiebenFilter').on('change', ':checkbox', function (e) {
            FilterFzgSperrenVerschiebenData();
        });
    }

    function FormPreparePrivateAjax() {
        FormPrepareAjax();
    }

    function GetGrid() {
        return $("#GridFzgSperrenVerschieben").data("tGrid");
    }

    function GridLoadingHide() {
        // needed for chrome browser: Explicitely hide grids loading icon on multiple subsequent grid ajax requests (because of filter control initializing)
        setTimeout('$("#GridFzgSperrenVerschiebenItems .t-grid-pager .t-status .t-icon").removeClass("t-loading")', 500);
    }

    function GridRefresh() {
        GetGrid().ajaxRequest();
    }

    function OnDataBound_GridFzgSperrenVerschieben() {
        FilteredData_Grid_OnDataBound($(this));
        $('.tooltips').tooltip();
    }

    function OnLoad_GridFzgSperrenVerschieben() {
        $('.t-no-data td').text(ladeHinweis);
    }

    function OnColumnShowHide_GridFzgSperrenVerschieben() {
        FilteredData_Grid_OnColumnShowHide($(this));
    }

    function OnColumnReorder_GridFzgSperrenVerschieben() {
        FilteredData_Grid_OnColumnReorder($(this));
    }

    function FilterFzgSperrenVerschiebenData() {
//        $.ajax({
//            type: "POST",
//            url: "FilterFzgSperrenVerschiebenData",
//            data: { SelektionsfilterLagerbestand: $("#SelektionsfilterLagerbestand").is(':checked'), nurMitBemerkung: $("#SelektionsfilterTempVersendete").is(':checked') },
//            success: function (result) {
//                FormPreparePrivateAjax();
//                GridRefresh();
//                setTimeout(function () {
//                    GetGrid().pageTo(1);
//                }, 500);
//            }
//        });
    }

</script>
