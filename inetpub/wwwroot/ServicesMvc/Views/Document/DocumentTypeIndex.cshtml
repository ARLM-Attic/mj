@model CkgDomainLogic.DomainCommon.ViewModels.DocumentViewModel

<div id="divDocumentTypeGrid">
    @Html.Partial("DocumentTypeGrid")
</div>

<div id="divDocumentTypeDetails"></div>

<script type="text/javascript" >

    function GetDocumentTypeGrid() {
        return $("#DocumentTypeGrid").data("tGrid");
    }

    function DocumentTypeGridRefresh() {
        GetDocumentTypeGrid().ajaxRequest();
    }

    function DocumentTypeGridLoadingHide() {
        // needed for chrome browser: Explicitely hide grids loading icon on multiple subsequent grid ajax requests (because of filter control initializing)
        setTimeout('$("#DocumentTypeGridItems .t-grid-pager .t-status .t-icon").removeClass("t-loading")', 500);
    }

    function OnDataBound_DocumentTypeGrid() {
        FilteredData_Grid_OnDataBound($(this));
        $('.tooltips').tooltip();
    }

    function OnColumnShowHide_DocumentTypeGrid() {
        FilteredData_Grid_OnColumnShowHide($(this));
    }

    function OnColumnReorder_DocumentTypeGrid() {
        FilteredData_Grid_OnColumnReorder($(this));
    }

    function CreateDocumentType() {
        EditDocumentType(-1);
    }

    function DeleteDocumentType(id) {
        var message = '@Localize.DocumentTypeDoYouReallyWantToDelete.ToJavascriptString()';

        if (!confirm(message)) {
            return;
        }

        var url = "DeleteDocumentType";
        $.ajax({
            type: "POST",
            url: url,
            data: { id: id },
            loadingShow: true,
            success: function (result) {
                DocumentTypeDeleted(result);
            },
            error: function (result) {
                alert(result.data);
            }
        });
    }

    function DocumentTypeDeleted(result) {

        if (result > 0) {
            alert('@Localize.DocumentTypeCannotBeDeleted.ToJavascriptString()');
            return;
        }

        TryDocumentTypeGridRefresh();
    }

    function EditDocumentType(id) {

        var url = "CreateOrEditDocumentType/" + id;
        $.ajax({
            type: "GET",
            url: url,
            loadingShow: true,
            success: function (result) {
                ShowDocumentTypeDetails(result);
            },
            error: function (result) {
                alert(result.data);
            }
        });
    }

    function ShowDocumentTypeDetails(result) {
        $("#divDocumentTypeDetails").html(result);
        $("#divDocumentTypeGrid").slideUp();
        $("#divDocumentTypeDetails").slideDown();

        FormPreparePrivateAjax();
    }

    function CloseDocumentTypeDetails() {
        CloseDocumentTypeDetailsInner();
        TryDocumentTypeGridRefresh();
    }

    function TryDocumentTypeGridRefresh() {
        // Refresh grid only
        if (typeof (GetDocumentTypeGrid()) !== "undefined") {
            GetDocumentTypeGrid().ajaxRequest();
        }
    }

    function CloseDocumentTypeDetailsInner() {
        $("#divDocumentTypeDetails").slideUp(function () {
            $("#divDocumentTypeGrid").delay(200).show();
            window.scrollTo(0, 0);
        });
    }

</script>