<?xml version="1.0" encoding="utf-8"?>
<ChartsSqlDataDescriptorTemplate>

  <Group>
    KBA Zulassungen
  </Group>

  <HtmlTemplateName>
    MapGermanyDoubleHeight.cshtml
  </HtmlTemplateName>

  <HtmlParameterXml>
    <Title>KBA Zulassungen, Fahrzeug Verteilung</Title>
    <ColorScheme>Green</ColorScheme>
    <ItemsName>Fahrzeuge</ItemsName>
  </HtmlParameterXml>
  
  <SqlTableOrViewName>
    KbaPlzKgs
  </SqlTableOrViewName>

  <GroupSqlStatement>

    select
    ModellNameKurz Key1,
    (Jahr * 100 + Monat) Jahr,
    SUM(FahrzeugAnzahl) IWert1
    from {0}
    {1}
    group by ModellNameKurz, (Jahr * 100 + Monat)
    order by ModellNameKurz, (Jahr * 100 + Monat)

  </GroupSqlStatement>

  <DetailsSqlStatement>

    select
    KGS,
    KgsName,
    (Jahr * 100 + Monat) Monat,
    FabrikatName Fabrikat,
    ModellNameKurz Modell,
    SUM(FahrzeugAnzahl) FahrzeugAnzahl,
    PLZ,
    PlzOrte
    from {0}
    {1}
    group by KGS, KgsName, PLZ, (Jahr * 100 + Monat), ModellNameKurz, FabrikatName, PlzOrte
    order by KgsName, PLZ, (Jahr * 100 + Monat), ModellNameKurz, FabrikatName

  </DetailsSqlStatement>

  <FilterInitial>

    FabrikatName in ('VW') and ModellNameKurz IN ('UP', 'PASSAT', 'TIGUAN', 'TOUAREG', 'BEETLE', 'GOLF')

  </FilterInitial>

  <FilterSelector>

    ModellNameKurz in ({0}) and (Jahr * 100 + Monat) in ({1}) 

  </FilterSelector>

  <FilterSelectorDetails>

    KGS in ({0})

  </FilterSelectorDetails>

  <AdditionalSqlStatements>

    <string>
      select
      KGS Key1,
      SUM(FahrzeugAnzahl) IWert1
      from {0}
      {1}
      group by KGS
      order by KGS
    </string>

  </AdditionalSqlStatements>

</ChartsSqlDataDescriptorTemplate>