<style type="text/css">
    
     span.reqired-fields {
         margin-left: -90px !important;
         white-space: nowrap !important;
     }
    
     div.presets-and-filter {
         background-color: #f9fff9;
         padding: 5px 0 0 0;
         border: 1px solid #f0fcf0;
         margin: 0 0 20px 0;
     }
     div.presets-and-filter input[type='text'] {
         background-color: white!important;
     }
     .span4 a {
         text-align: left!important;   
     }
    
     div.zulassungen-count {
         color: blue;
         font-weight: bold;
         margin-left: 5px;
     }
    
     #pdfContentStyle { width: 150px; height: 150px; padding: 0.5em; }
     #pdfContentStyle h3 { text-align: center; margin: 0; }
     .ui-resizable-helper { border: 75px solid #EFEFEF; margin: -75px; }

</style>

<script type="text/javascript">

    var ladeHinweis = '@Localize.LoadingData';
    var _modelIsValid = false;
    var _selectedItemsCount = 0;
    var _validationError = false;
    
    function FormPreparePrivate() {
        
        try { FormWizardInitPrivate(); } catch (e) { }
        
    };

    function FormPreparePrivateAjax(step) {     
        FormPrepareAjax();
        var stepKey = FormWizard.GetStepKey(step + 1);
        
        $('.tooltips').tooltip();
    }

    function FormWizardInitPrivate() {
        FormWizard.Init(function () {
            FormWizard.ActionsShow(true);
            FormWizard.tabClickDisabled = true;
        });

        FormWizard.OnNext(function (step, maxSteps) {
            var stepName = FormWizard.GetStepKey(step - 1);
            try {
                $("#AjaxForm" + stepName).submit();
                window.scrollTo(0, 0);
                return false;
            }
            catch (e) {
                return true;
            }
        });

        FormWizard.OnCustom1(function (step, maxSteps) {
            SaveZulassung();

            return true;
        });

        FormWizard.OnSubmit(function () {

            LoadingShow();
            SpanAlertWarning("WaitHint", '@Localize.PleaseWaitWhileProcessingYourRequest.ToJavascriptString()', 120000);
            AjaxRequestNextStep();

            return true;
        });

        FormWizard.OnRestart(function () {
            LocationReloadWithoutQueryString();
        });
    }
    
    function AjaxRequestNextStep() {
        var nextTabKey = FormWizard.GetNextTabKey();
        // alert("AjaxRequestNextStep: " + nextTabKey);
        $.ajax({
            type: "POST",
            url: nextTabKey,
            data: {firstRequest: 'ok'},
            //data: {},
            loadingShow: true,
            success: function (result) {
                if (typeof (result.message) !== "undefined") {
                    alert(result.message);
                    return;
                }

                FormWizard.SetNextTabHtmlAndMoveNext(result);       
                
            }
        });    
    }

    function AjaxFormAuftraggeberComplete() {
        FormPrepareAjax();
        if (_modelIsValid) {
            AjaxRequestNextStep();
            return;
        }             
    }

    function AjaxFormAbholungComplete() {
        FormPrepareAjax();
        if (_modelIsValid) {
            AjaxRequestNextStep();
            return;
        }
    }

    function AjaxFormAnlieferungComplete() {
        FormPrepareAjax();

        if (_modelIsValid) {
            AjaxRequestNextStep();
            return;
        }
    }

    function AjaxFormUploadComplete() {
        FormPrepareAjax();

        if (_modelIsValid) {
            AjaxRequestNextStep();
            return;
        }
    }

    function AjaxFormOverviewComplete() {
        FormPrepareAjax();

        if (_modelIsValid) {
            AjaxRequestNextStep();
            return;
        }
    }
    
    function ShowHideNextButton() {
        
        var nextButtonValid = 
            $('#SelectedZulassungsDatum').val() != '' && $('#SelectedZulassungsDatum').val() != null && 
            _selectedItemsCount > 0 && !_validationError;

        FormWizard.ActionsShow(nextButtonValid);
    }

    function FormWizardShowHideSaveButton(show, delay) {
        setTimeout(function () {
            $(".button-custom1 i").removeClass("m-icon-swapright").addClass("icon-shopping-cart");
//            FormWizard.ButtonCustom1Show(show, _customButtonText);
        }, (typeof (buttonText) !== 'undefined' ? delay : 0));
    }

    function ResizePdfContainer() {
        var width = $("#formWizard").width();
        var height = $(window).height();
        $(".pdfContentStyle").css('width', width - 15 | 0);
        $(".pdfContentStyle").css('height', height * 0.35 | 0);
    }
</script>

