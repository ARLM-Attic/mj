

<script type="text/javascript">

    var _chartData = null;
    var _chartOptions = null;
    var _dashboardItemOptions = null;

    function _ChartPrepareJsonResult(result, widgetKey) {
        _chartData = result.data;
        _chartOptions = jQuery.parseJSON(result.options);
        _dashboardItemOptions = jQuery.parseJSON(result.dashboardItemOptions);

        if (result.customscriptfunction !== "")
            eval(result.customscriptfunction + "('" + widgetKey + "');");
    }


    //
    // <custom functions>
    //

    function DefaultBarMouseover(widgetKey) {

        _chartOptions.colors = ["#0000BB"];

        _chartOptions.mouse.trackFormatter = function (point) {
            if (typeof (point.y) != "undefined")
                return point.y.replace(/\.0/g, "") + "";
            return "";
        };
    }

    function WfmDurchlaufzeiten(widgetKey) {
        _chartOptions.bars.barWidth = 1.0;
        _chartOptions.xaxis.min = 0;
        _chartOptions.yaxis.tickFormatter = function (yVal) { return yVal + "%"; };
        _chartOptions.mouse.trackFormatter = function (point) {
            var groupLabel = point.series.label;
            if (typeof (point.y) != "undefined")
                return point.y.replace(/\./g, ",") + "% im " + groupLabel;
            return "";
        };
    }

    function WfmAuftraege(widgetKey) {

        var colors = [];

        if (widgetKey === "WFM_Auftraege_DiesesJahr_Alle")
            colors = ["#0000BB"];
        if (widgetKey === "WFM_Auftraege_DiesesJahr_InArbeit")
            colors = ["#C0C000"];
        if (widgetKey === "WFM_Auftraege_DiesesJahr_Abgemeldet")
            colors = ["#900000"];
        if (widgetKey === "WFM_Auftraege_DiesesJahr_Storniert")
            colors = ["#E00000"];

        _chartOptions.colors = colors;

        _chartOptions.mouse.trackFormatter = function (point) {
            if (typeof (point.y) != "undefined")
                return point.y.replace(/\.0/g, "") + "";
            return "";
        };
    }

    function ZulassungShoppingCart(widgetKey) {

        _chartOptions.grid.horizontalLines = false;
        _chartOptions.bars.ShowBarLabelsInside = true;
        _chartOptions.colors = ["#BB0000", "#00BB00", "#0000BB"];

    }

    function ZulassungenWithBarLabelsInside(widgetKey) {

        _chartOptions.bars.ShowBarLabelsInside = true;

    }

    function ZulassungenProMaterialLetzte30TagePie(widgetKey) {

        _chartOptions.OffsetY = -95;

        _chartOptions.legend.position = 'sw';
        _chartOptions.legend.noColumns = 2;
        _chartOptions.PieLabelValueThreshold = 3.0;
        _chartOptions.pie.sizeRatio = 0.4;

        _chartOptions.mouse.track = true;
        _chartOptions.mouse.position = 'nw';
        _chartOptions.mouse.trackFormatter = function (point) {
            var groupLabel = point.series.label;
            return groupLabel;
        };

        var style = document.createElement("style");
        document.head.appendChild(style);
        style.sheet.insertRule("." + widgetKey + " .flotr-legend { left: 0!important; }", 0);
        style.sheet.insertRule("." + widgetKey + " .flotr-legend .flotr-legend-label { width: 45%; }", 0);
        style.sheet.insertRule("." + widgetKey + " .flotr-legend-bg { left:0!important; width: 100%; }", 0);
    }

    function ZBIIEinAusgaenge(widgetKey) {

        var colors = [];

        if (widgetKey === "ZBIIEingaengeDiesesJahr")
            colors = ["#4444DD"];
        if (widgetKey === "ZBIIEingaengeLetztesJahr")
            colors = ["#2222BB"];

        if (widgetKey === "ZBIIEingaengeDiesesJahrNachHersteller")
            colors = ["#2222FF"];
        if (widgetKey === "ZBIIEingaengeLetztesJahrNachHersteller")
            colors = ["#0000DD"];

        if (widgetKey === "ZBIIAusgaengeDiesesJahr")
            colors = ["#888822"];
        if (widgetKey === "ZBIIAusgaengeLetztesJahr")
            colors = ["#666600"];

        if (widgetKey === "ZBIIAusgaengeDiesesJahrNachHersteller")
            colors = ["#CCCC44"];
        if (widgetKey === "ZBIIAusgaengeLetztesJahrNachHersteller")
            colors = ["#AAAA22"];

        _chartOptions.colors = colors;

        _chartOptions.mouse.trackFormatter = function (point) {
            if (typeof (point.y) != "undefined")
                return point.y.replace(/\.0/g, "") + "";
            return "";
        };
    }


    //
    // </custom functions>
    //

</script>
