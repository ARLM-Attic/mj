@using CkgDomainLogic.Autohaus.Models
@using CkgDomainLogic.Fahrzeugbestand.Models
@model Zulassungsdaten

<script>
    function OnDataBound_GridFahrzeugAuswahlAbmeldung() {
        App.initUniform();
    }
</script>

@Html.HiddenFor(m => m.ZulassungsartMatNr)
@Html.HiddenFor(m => m.Zulassungskreis)

@if (Model.IsMassenabmeldung)
{
    @Html.FormDatePickerFor(m => m.Abmeldedatum, new { @class = "m-wrap small" })

    using (@Html.PortletBox("Detailangaben", "icon-table", "light-grey", false))
    {
        var gridName = "GridFahrzeugAuswahlAbmeldung";
        @(Html.Telerik()
                .Grid<FahrzeugAkteBestand>()
                .Name(gridName)
                .XAjaxDataBinding("FahrzeugAuswahlSelectedAjaxBinding", "Zulassung")
                .Columns(columns =>
                {
                    columns.XBound(c => c.FIN);
                    columns.XBound(c => c.FahrzeugArt);
                    columns.XBound(c => c.HandelsName);
                    columns.XBound(c => c.Kennzeichen).ClientTemplate("<input id='Kennzeichen_<#= data.FIN #>' type='text' class='inputwidth uppercase editkennzabm' data-fieldname='Kennzeichen' value='<#= data.Kennzeichen #>' />");
                    columns.XBound(c => c.VorhandenesKennzReservieren).ClientTemplate("<input id='VorhandenesKennzReservieren_<#= data.FIN #>' type='checkbox' class='editkennzres' data-fieldname='VorhandenesKennzReservieren' <# if (data.VorhandenesKennzReservieren) { #> checked <# } #> value='True' />").Filterable(false);
                })
                .XAutoColumnConfiguration()
                .ClientEvents(events => events.OnDataBound("OnDataBound_" + gridName))
                .XPageSize(10)
                .XSort(sortOrder => sortOrder.Add(c => c.FIN).Ascending())
        )
    }
}
else
{
    @Html.FormDatePickerFor(m => m.Abmeldedatum, new { @class = "m-wrap small", col = "left" })
    @Html.FormCheckBoxFor(m => m.VorhandenesKennzeichenReservieren, new { @class = "m-wrap", col = "right" })

    @Html.FormTextBoxFor(m => m.Kennzeichen, new { @class = "m-wrap medium uppercase", @onkeypress = "return CleanUpKennzeichen();" }, labelText: Localize.LicenseNo)
}
