@using CkgDomainLogic.Autohaus.Models
@model BankAdressdaten

<div id="DivBankAdressdaten" class="margin-top-20">
    @using (Ajax.BeginForm("BankAdressdatenForm", "Zulassung", null,
                new MvcAjaxOptions { UpdateTargetId = "DivBankAdressdaten", OnComplete = "AjaxFormBankAdressdatenComplete();" },
                    htmlAttributes: new { @class = "form-horizontal", id = "AjaxFormBankAdressdaten" }))
    {
        @Html.FormValidationSummary()
        

        <div class="row-fluid">
            
            <div class="span6">
                
                @using (Html.PortletBox(Localize.DifferentAddress, "icon-home"))
                {
                    @Html.HiddenFor(m => m.Cpdkunde)
                    @Html.HiddenFor(m => m.CpdMitEinzugsermaechtigung)

                    @Html.PartialFor(m => m.Rechnungsempfaenger, "Partial/BankAdressdatenReForm")

                    @Html.FormRadioButtonListFor(m => m.Zahlungsart, BankAdressdaten.Zahlungsarten.ToSelectList())
                }

            </div>

            <div class="span6">
                
                @using (Html.PortletBox(Localize.BankData, "icon-book"))
                {
                    @Html.HiddenFor(m => m.KontoNr)
                    @Html.HiddenFor(m => m.Bankleitzahl)
        
                    @Html.FormTextBoxFor(m => m.Kontoinhaber, new { @class = "m-wrap" })

                    @Html.FormTextBoxFor(m => m.Iban, new { @class = "m-wrap uppercase", @onkeyup = "return TryLoadBankdatenAusIban(this)", @onpaste = "return TryLoadBankdatenAusIban(this)" },
                                         postControlHtml: @<text>
                                                           </text>)

                    @Html.FormTextBoxFor(m => m.Swift, new { @class = "m-wrap uppercase", @readonly = "readonly" },
                                         postControlHtml: @<text>
                                                               <div>@Localize.WillBeFilledAutomatically</div>
                                                           </text>)

                    @Html.FormTextBoxFor(m => m.Geldinstitut, new { @class = "m-wrap", @readonly = "readonly" },
                                         postControlHtml: @<text>
                                                               <div>@Localize.WillBeFilledAutomatically</div>
                                                               @Html.SpanAlert("bankDataHint")
                                                           </text>)
                }

            </div>

        </div>

        
        <script type="text/javascript">
            
            _modelIsValid = @ViewContext.ViewData.ModelState.IsValid.ToString().ToLower();

            _skipBankAddressData = ($("#SkipBankAdressdaten").val().toString().toLowerCase() == 'true');

            TrySkipBankAddressData();

        </script>
    }
</div>
