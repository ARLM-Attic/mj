@model CkgDomainLogic.Autohaus.ViewModels.CleverViewModel

<h3 class="page-title" id="headerTitle">@Localize.Autohaus_KroschkeClever <small></small></h3>

@Html.SpanAlert("spanAlertCleverSearch")

<div class="form-horizontal label-width-200 padding-bottom-10">

    @Html.FormTextBoxFor(m => m.AnfrageText, new { @class = "m-wrap float-left" })

    <div class="space10"></div>

    <div class="row-fluid">
            
        <div class="span6">
                
            @foreach (var option in Model.AnfrageOptionen)
            {
                <div class=" margin-left-25 margin-top-10">
                    <button class='btn mini gray' onclick='PerformCleverSearch("@option.Key");'><i class='halflings-icon white chevron-right'></i></button>
                    <span class="margin-left-20">@option.Text</span>
                </div>
            }

        </div>

        <div class="span6">
                
            <div id="divCleverResult"></div>

        </div>

    </div>

</div>

<script type="text/javascript">

    function FormPreparePrivate() {
    }

    function FormPreparePrivateAjax() {
        FormPrepareAjax();
    }

    function PerformCleverSearch(anfrageTyp) {
        FormPreparePrivateAjax();

        if (!$("#AnfrageText").val()) {
            $("#divCleverResult").html("");
            SpanAlertWarning("spanAlertCleverSearch", '@Localize.SearchTextRequired.ToJavascriptString()', 5000);
            return;
        }

        $.ajax({
            type: "POST",
            url: "PerformSearch",
            data: { anfrageText: $("#AnfrageText").val(), anfrageTyp: anfrageTyp },
            loadingShow: true,
            success: function (result) {
                ShowCleverSearchResult(result);
                LoadingHide();
            }
        });
    }

    function ShowCleverSearchResult(result) {
        $("#divCleverResult").html(result);
        FormPreparePrivateAjax();
    }

</script>
